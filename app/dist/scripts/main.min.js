!function(){"use strict";function t(t,e,o){t.state("home",{url:"/",views:{main:{templateUrl:"home/home.tpl.html",controller:"HomeController",controllerAs:"vm"}}}).state("tutorials",{url:"/tutorials",views:{main:{templateUrl:"tutorials/tutorials.tpl.html",controller:"TutorialsController",controllerAs:"vm"}}}).state("blog",{url:"/blog",views:{main:{templateUrl:"blog/blog.tpl.html",controller:"BlogController",controllerAs:"vm"}}}).state("postsByTag",{url:"/tag/:tag",views:{main:{templateUrl:"blog/blog.tpl.html",controller:"BlogController",controllerAs:"vm"}}}).state("postsBySearch",{url:"/search/:searchTerm",views:{main:{templateUrl:"blog/blog.tpl.html",controller:"BlogController",controllerAs:"vm"}}}).state("post",{url:"/blog/:id/:title",views:{main:{templateUrl:"blog/post.tpl.html",controller:"PostController",controllerAs:"vm"}}}).state("tutorial",{url:"/tutorial/:id/:title",views:{main:{templateUrl:"tutorials/tutorial.tpl.html",controller:"TutorialController",controllerAs:"vm"}}}).state("register",{url:"/register",views:{main:{templateUrl:"register/register.tpl.html",controller:"RegisterController",controllerAs:"vm"}}}).state("login",{url:"/login",views:{main:{templateUrl:"login/login.tpl.html",controller:"LoginController",controllerAs:"vm"}}}).state("about",{url:"/about",views:{main:{templateUrl:"about/about.tpl.html",controller:"AboutController",controllerAs:"vm"}}}),e.html5Mode(!0).hashPrefix("!"),o.rule(function(t,e){var o,r,n=e.url();return"/"===n[n.length-1]||n.indexOf("/?")>-1?n.substring(0,n.length-1):(o=/\/(#[^\/]*)$/,r=n.match(o),1<r.length?n.replace(r[0],r[1]):void 0)})}function e(t,e,o,r,n){var a=this;a.showMobileMenu=!1,a.authenticated=localStorage.getItem("authenticated")?!0:!1,a.toggleMobileMenu=function(t){t.preventDefault(),a.showMobileMenu=!a.showMobileMenu},a.logout=function(){localStorage.removeItem("authenticated"),e.location.href="/"},t.$on("$stateChangeSuccess",function(t,e){a.activeSection=e.name,a.showMobileMenu=!1}),t.$watchCollection(function(){return n.getMetadata()},function(n){"undefined"!=typeof n.title&&(t.meta=n,r(function(){"localhost"!==o.host()&&e.ga("send","pageview",{page:o.path()})}))}),angular.element(document).ready(function(){console.log("Hello World")})}angular.module("app",["ui.router","ngAnimate","angularUtils.directives.dirPagination"]),t.$inject=["$stateProvider","$locationProvider","$urlRouterProvider"];var o={ROOT_URL:"/",API_URL:"http://www.example.com/api/wp-json/"};e.$inject=["$rootScope","$window","$location","$timeout","MetadataService"],angular.module("app").config(t).constant("config",o).controller("AppController",e)}(),function(){"use strict";function t(t){t.setMetadata({title:"About This Blog",description:"Some des."})}t.$inject=["MetadataService"],angular.module("app").controller("AboutController",t)}(),function(){"use strict";function t(t,e,o,r,n){var a,l=this;l.posts=[],l.loaded=!1,l.subtitle="",n.setMetadata({title:"Blog",description:"A collection of articles on some topics."}),"undefined"!=typeof e.tag?(a=r.allPostsByTag(e.tag),l.subtitle='tagged with "'+e.tag+'"'):"undefined"!=typeof e.searchTerm?(a=r.allPostsBySearchTerm(e.searchTerm),l.subtitle='searching "'+e.searchTerm+'"'):a=r.allPosts(),a.then(function(t){l.posts=t,l.loaded=!0}),l.scrollToTop=function(){t()},l.search=function(t){o.go("postsBySearch",{searchTerm:t})}}t.$inject=["$anchorScroll","$stateParams","$state","BlogService","MetadataService"],angular.module("app").controller("BlogController",t)}(),function(){"use strict";function t(t,e,o,r,n,a){var l=this;l.post={},n.post(t.id).then(function(t){l.post=t,a.setMetadata({title:t.title,description:t.excerpt})})}t.$inject=["$stateParams","$anchorScroll","$timeout","$location","BlogService","MetadataService"],angular.module("app").controller("PostController",t)}(),function(){"use strict";function t(t,e){var o=this;o.featuredPosts=[],t.featuredPosts().then(function(t){o.featuredPosts=t}),o.authenticated=localStorage.getItem("authenticated")?!0:!1,e.setMetadata({})}t.$inject=["BlogService","MetadataService"],angular.module("app").controller("HomeController",t)}(),function(){"use strict";function t(t,e){var o=this;t.setMetadata({title:"Login",description:"Login for an account here"}),o.saveLoginState=function(){console.log("saving logged in state"),localStorage.setItem("authenticated",!0),localStorage.setItem("username",$("#name").val())},o.loginRequest=function(){$.post("http://localhost:3000/authenticate",{username:$("#name").val(),password:$("#password").val()}).done(function(t){this.saveLoginState(),e.location.href="/"}.bind(this)).fail(function(t){console.log(t),alert("Incorrect username or password")})},o.loginUser=function(t){t.preventDefault(),console.log("login user"),this.loginRequest()}}t.$inject=["MetadataService","$window"],angular.module("app").controller("LoginController",t)}(),function(){"use strict";function t(t,e){var o=this;t.setMetadata({title:"Register",description:"Register for an account here"}),o.validate=function(){var t=$("#password").val(),e=$("#password-confirm").val(),o=$("#email").val();$("#name").val();return t!=e?"Passwords must match":1==o.split("utoronto.ca").length?"Must be a valid email utoronto address":null},o.saveLoginState=function(){console.log("saving logged in state"),localStorage.setItem("authenticated",!0),localStorage.setItem("username",$("#name").val())},o.registerRequest=function(){$.post("http://localhost:3000/register",{username:$("#name").val(),email:$("#email").val(),password:$("#password").val()}).done(function(t){1==t.status?alert(t.message):0==t.status&&(this.saveLoginState(),e.location.href="/")}.bind(this)).fail(function(){console.log("unaccounted for error")})},o.registerUser=function(t){t.preventDefault(),null==this.validate()?this.registerRequest():alert(this.validate())}}t.$inject=["MetadataService","$window"],angular.module("app").controller("RegisterController",t)}(),function(){"use strict";function t(t,e,o,r,n,a){var l=this;l.post={},n.post(t.id).then(function(t){l.post=t,a.setMetadata({title:t.title,description:t.excerpt})})}t.$inject=["$stateParams","$anchorScroll","$timeout","$location","BlogService","MetadataService"],angular.module("app").controller("TutorialController",t)}(),function(){"use strict";function t(t,e,o,r,n){var a,l=this;l.posts=[],l.loaded=!1,l.subtitle="",n.setMetadata({title:"Tutorials",description:"All HMB Tutorials"}),a=r.allTutorials(),a.then(function(t){l.posts=t,l.loaded=!0}),l.scrollToTop=function(){t()}}t.$inject=["$anchorScroll","$stateParams","$state","BlogService","MetadataService"],angular.module("app").controller("TutorialsController",t)}(),function(){"use strict";angular.module("app").filter("decodeHtmlCodes",function(){return function(t){return t?t.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(e)}):""}})}(),function(){"use strict";function t(){return function(t){return String(t).replace(/<[^>]+>/gm,"")}}angular.module("app").filter("stripHtmlTags",t)}(),function(){"use strict";function t(t,e,o){function r(){return c("posts?filter[category_name]=post")}function n(){return c("posts?filter[category_name]=tutorials&filter[order]=ASC&filter[orderby]=id")}function a(t){return c("posts?filter[category_name]=post&filter[tag]="+t)}function l(t){return c("posts?filter[category_name]=post&filter[s]="+t)}function i(){return c("posts?filter[category_name]=featured")}function s(t){return c("posts/"+t)}function c(e){return t.get(o.API_URL+e,{cache:!0}).then(function(t){if(t.data instanceof Array){var e=t.data.map(function(t){return u(t)});return e}return u(t.data)})}function u(t){return t.excerpt=e.trustAsHtml(t.excerpt),t.date=Date.parse(t.date),t.content&&t.content.split("iframe").length>1&&(t.content=t.content.split("<p>").join("").split("</p>").join("")),t.content=e.trustAsHtml(t.content),t}return{allPosts:r,allTutorials:n,allPostsByTag:a,allPostsBySearchTerm:l,featuredPosts:i,post:s}}t.$inject=["$http","$sce","config"],angular.module("app").factory("BlogService",t)}(),function(){"use strict";function t(){var t,e,o="Ontario Online Portal",r="A series of tutorials for the University of Toronto Human Biology Department";this.setMetadata=function(n){t=n.title?n.title:o,e=n.description?n.description:r},this.getMetadata=function(){return{title:t,description:e}}}angular.module("app").service("MetadataService",t)}(),function(){"use strict";function t(t){return{restrict:"E",templateUrl:"common/directives/revealingSearchInput/revealingSearchInput.tpl.html",replace:!0,scope:{searchCallback:"&"},link:function(e,o){e.searchButtonClick=function(){e.showSearchInput?e.searchTerm?e.searchCallback({term:e.searchTerm}):e.showSearchInput=!1:(e.showSearchInput=!0,o.find("input")[0].focus())},e.searchInputBlur=function(){t(function(){e.showSearchInput=!1},100)}}}}t.$inject=["$timeout"],angular.module("app").directive("revealingSearchInput",t)}();